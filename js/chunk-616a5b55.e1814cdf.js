(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-616a5b55"],{"1e83":function(t,e,r){"use strict";var o=r("9190"),s=r.n(o);s.a},"39b0":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"floor-detail"},[o("div",{staticClass:"floor-overlay-list"},t._l(t.floors,(function(e,r){return o("FloorOverlayItem",{key:r,attrs:{index:r,isShowStatus:t.curFloor-1===r,isShowLine:t.curFloor-1===r}})})),1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"line-and-light"},[o("canvas",{staticClass:"connect-line-canvas",attrs:{width:t.w,height:t.h}}),o("img",{staticClass:"floor-light",attrs:{src:r("e60b"),alt:"楼层灯光"}}),o("div",{staticClass:"cur-floor-num-tips"},[t._v(" "+t._s(t.curFloor+"层")+" "),t.list.length?o("div",{staticClass:"status-color status-line-animation",style:{background:t.statusColors[t.list[t.curFloor-1].status]}}):t._e()])])])},s=[],i=(r("4160"),r("a9e3"),r("d3b7"),r("159b"),r("d0ff")),n=(r("96cf"),r("c964")),a=r("2af9"),l=r("4260"),c={components:{FloorOverlayItem:a["c"]},props:{status:{type:Number,default:1},curFloor:{type:Number,default:1},floors:{type:Number,default:25},list:{type:Array,default:function(){return[]}},delay:{type:Number,default:250},lineDuration:{type:Number,default:350},statusColors:{type:Array,deault:function(){return[]}}},data:function(){return{w:200,h:300,ctx:null,isShow:!1,curFloorNum:1,lastFloorNum:"",direction:"toPrev"}},mounted:function(){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{init:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["d"])(t);case 2:return e.isShow=!0,e.initLine(),r.next=6,e.animateLine();case 6:return e.floorNumTips(.8*e.lineDuration),r.next=9,Object(l["d"])(600);case 9:e.setCurFloor(e.direction,e.curFloorNum-1);case 10:case"end":return r.stop()}}),r)})))()},initLine:function(){var t=this.$el.querySelector(".connect-line-canvas");this.ctx=t.getContext("2d"),this.handleDraw(this.curFloor,this.floors)},animateLine:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=t.$el.querySelector(".line-and-light");r.classList.remove("width-627"),r.classList.add("width-0"),setTimeout((function(){r.classList.add("width-627"),e()}),t.lineDuration)})));case 1:case"end":return e.stop()}}),e)})))()},handleDraw:function(t,e){var r=1-t/e,o=this.h*r+2;this.drawLine([0,o])},drawLine:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[200,138],r=this.ctx;r.clearRect(0,0,200,300),r.lineWidth=2,r.beginPath(),r.moveTo.apply(r,Object(i["a"])(t)),r.lineTo.apply(r,Object(i["a"])(e)),r.strokeStyle="#fff",r.stroke()},floorNumTips:function(t){var e=this.$el.querySelector(".cur-floor-num-tips");e.classList.remove("scale-1"),e.classList.add("scale-0"),setTimeout((function(){e.classList.add("scale-1")}),t)},toNext:function(){this.direction="toNext",this.curFloorNum--,this.curFloorNum<1&&(this.curFloorNum=1,console.log("到底了")),this.setCurFloor(this.direction,this.curFloorNum-1)},toPrev:function(){this.direction="toPrev",this.curFloorNum++,this.curFloorNum>this.floors&&(this.curFloorNum=this.floors,console.log("到顶了")),this.setCurFloor(this.direction,this.curFloorNum-1)},setCurFloor:function(t,e){var r=this.$el.querySelectorAll(".floor-overlay-item");if(this.clearFloorItemClassList(),"toPrev"===t)if(r[e].classList.add("floor-overlay-item-def-top"),0===e)r[e].classList.add("to-prev-1");else{var o=e-1;r[o].classList.add("pos-prev-1","to-prev-3"),r[e].classList.add("to-prev-2")}else if(console.log("setCurFloor direction",t),0===e){var s=e+1;r[s].classList.add("pos-prev-1","to-next-1"),r[e].classList.add("pos-next-1","to-next-2")}else{var i=e+1,n=e-1;r[i].classList.add("pos-prev-1","to-next-1"),r[e].classList.add("pos-next-1","to-next-2"),r[n].classList.add("pos-next-2","to-next-4")}console.log("当前楼层",e+1),this.lastFloorNum=e},clearFloorItemClassList:function(){var t=this.$el.querySelectorAll(".floor-overlay-item");t.forEach((function(t){t.classList=["floor-overlay-item"]}))},changeFloorNum:function(t){if(!(t===this.curFloorNum||t<1)){var e=t-this.curFloorNum;this.direction=e>0?"toPrev":"toNext",this.curFloorNum=t,this.setCurFloor(this.direction,t-1)}}},watch:{curFloor:function(t){var e=this;console.log("watch curFloor",t),this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.handleDraw(t,e.floors),e.animateLine(),e.floorNumTips(.8*e.lineDuration),r.next=5,Object(l["d"])(600);case 5:e.changeFloorNum(t);case 6:case"end":return r.stop()}}),r)}))))}}},u=c,h=(r("1e83"),r("2877")),d=Object(h["a"])(u,o,s,!1,null,null,null);e["default"]=d.exports},9190:function(t,e,r){}}]);
//# sourceMappingURL=chunk-616a5b55.e1814cdf.js.map