(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214c9eee","chunk-4f7a8eee","chunk-9acb44f4","chunk-6bfeb16b","chunk-616a5b55","chunk-506f44e3"],{"04d3":function(t,e,n){"use strict";var i=n("4f61"),o=n.n(i);o.a},"110d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-monitor"},[i("TextTitle",{attrs:{title:"所有监控"}}),i("BorderBox1",{attrs:{w:578,h:264,handleMouseenter:t.handleMouseenter,handleMouseleave:t.handleDebounce(this.handleMouseleave,100)}},[i("div",{staticClass:"left"},[i("TextTitle2",{attrs:{title:"楼层概览"}}),i("MonitorList",{attrs:{activeIndex:t.activeIndex,list:t.curFloors,pageSize:t.floorPageSize,page:t.floorPage,pageTotal:t.floorPageTotal,delay:t.delay,currentChange:t.handlePageClick,handleSelectFloor:t.handleSelectFloor}})],1),i("div",{staticClass:"right"},[i("TextTitle2",{attrs:{title:"当前楼层画面"}}),i("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isShowPic&&t.curFloors.length?i("div",{staticClass:"video-container"},[i("img",{attrs:{src:n("f456")("./snap-shot-0"+t.curFloors[t.activeIndex].pic+".png"),alt:""}})]):t._e()])],1)])],1)},o=[],a=(n("fb6a"),n("a9e3"),n("2af9")),r=n("4260"),s={props:{totalFloors:{type:Number,default:25},list:{type:Array,default:function(){return[]}},curFloorChange:{type:Function,default:function(t){}}},components:{TextTitle:a["m"],BorderBox1:a["a"],TextTitle2:a["n"],MonitorList:a["f"]},data:function(){return{floors:[],curFloors:[],floorPageSize:6,floorPage:1,floorPageTotal:0,delay:250,timer:null,playTime:3e3,activeIndex:0,hasInitPlay:!1,isShowPic:!0}},mounted:function(){},methods:{updateFloors:function(t){var e=this.floorPageSize;this.floorPageTotal=Math.ceil(t.length/e),this.floors=t,this.curFloors=t.slice(e*(this.floorPage-1),e*this.floorPage)},initPagePlay:function(){var t=this;this.hasInitPlay=!0,this.clearAutoPlay();var e=this.curFloors.length,n=this.delay*e;e&&setTimeout((function(){t.autoPlayEveryFloorMonitor()}),n)},autoPlayEveryFloorMonitor:function(){var t=this,e=this.curFloors.length,n=this.playTime;this.timer=setInterval((function(){var n=t.floors,i=t.floorPageSize;t.activeIndex++,t.isShowPic=!1,setTimeout((function(){t.isShowPic=!0}),20),t.activeIndex>=e&&(t.activeIndex=0,t.floorPage++,t.floorPage=t.floorPage>t.floorPageTotal?1:t.floorPage,t.curFloors=[],t.curFloors=n.slice(i*(t.floorPage-1),i*t.floorPage),t.initPagePlay())}),n)},clearAutoPlay:function(){var t=this.timer;t&&clearInterval(t),t=null},handleMouseenter:function(){console.log("handleMouseenter"),this.clearAutoPlay()},handleMouseleave:function(){console.log("handleMouseleave"),this.autoPlayEveryFloorMonitor()},handlePageClick:function(t){var e=this.floors,n=this.floorPageSize;this.activeIndex=0,console.log("handlePageClick page",t),this.floorPage=t,this.curFloors=e.slice(n*(this.floorPage-1),n*this.floorPage)},handleSelectFloor:function(t){this.activeIndex=t;var e=this.floorPageSize*(this.floorPage-1)+t+1;this.curFloorChange(e)},handleDebounce:r["c"]},beforeDestroy:function(){this.clearAutoPlay()},watch:{list:function(t){var e=this;this.updateFloors(t),this.hasInitPlay||this.$nextTick((function(){e.initPagePlay()}))}}},l=s,c=(n("3749"),n("2877")),u=Object(c["a"])(l,i,o,!1,null,"30468f68",null);e["default"]=u.exports},"194c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"floor-building"},[i("img",{staticClass:"building-foundation",attrs:{src:n("2daf"),alt:""}}),i("div",{staticClass:"floors"},[i("transition-group",{attrs:{name:"staggered-fade",tag:"ul",css:!1},on:{"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave}},t._l(t.list,(function(e,n){return i("FloorBuildingItem",{key:e.id,attrs:{status:e.status,"data-index":n,index:n},on:{click:function(e){return t.handleSelectFloor(n)}}})})),1)],1)])},o=[],a=(n("a9e3"),n("2af9")),r={props:{floors:{type:Number,default:25},list:{type:Array,default:function(){return[]}},delay:{type:Number,default:.25},curFloor:{type:Number,default:1}},components:{FloorBuildingItem:a["b"]},data:function(){return{}},mounted:function(){},methods:{initFloorList:function(t){for(var e=[],n=0;n<t;n++){var i={status:n%this.limit+1,id:n+1};e.push(i)}this.list=e},beforeEnter:function(t){t.style.opacity=0},enter:function(t,e){var n=t.dataset.index*this.delay;setTimeout((function(){Velocity(t,{opacity:1},{complete:e})}),n)},leave:function(t,e){var n=t.dataset.index*this.delay;setTimeout((function(){Velocity(t,{opacity:0},{complete:e})}),n)},setCurFloorStatus:function(t){var e=Math.floor(8*Math.random());e=0===e?1:e,this.list[t-1].status=e},handleSelectFloor:function(t){console.log("handleSelectFloor",t)}},watch:{curFloor:function(t){this.setCurFloorStatus(t)}}},s=r,l=(n("c515"),n("2877")),c=Object(l["a"])(s,i,o,!1,null,null,null);e["default"]=c.exports},"1e83":function(t,e,n){"use strict";var i=n("9190"),o=n.n(i);o.a},"22e3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alarm-statistics"},[n("TextTitle",{attrs:{title:"楼宇人流变化趋势"}}),n("BorderBox1",{attrs:{w:800,h:264}},[n("div",{attrs:{id:"line-chart"}})])],1)},o=[],a=n("2af9"),r=n("22b4"),s=n("1be7"),l=n("7fae"),c=n("6d8b"),u=n("6179"),h=n("b1d4"),d=n("2f45"),f=n("e0d3"),p=n("1f39"),m=function(){function t(t){this.coordSysDims=[],this.axisMap=Object(c["f"])(),this.categoryAxisMap=Object(c["f"])(),this.coordSysName=t}return t}();function g(t){var e=t.get("coordinateSystem"),n=new m(e),i=v[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}var v={cartesian2d:function(t,e,n,i){var o=t.getReferringComponents("xAxis",f["a"]).models[0],a=t.getReferringComponents("yAxis",f["a"]).models[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",a),y(o)&&(i.set("x",o),e.firstCategoryDimIndex=0),y(a)&&(i.set("y",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,i){var o=t.getReferringComponents("singleAxis",f["a"]).models[0];e.coordSysDims=["single"],n.set("single",o),y(o)&&(i.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var o=t.getReferringComponents("polar",f["a"]).models[0],a=o.findAxisModel("radiusAxis"),r=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",r),y(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),y(r)&&(i.set("angle",r),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var o=t.ecModel,a=o.getComponent("parallel",t.get("parallelIndex")),r=e.coordSysDims=a.dimensions.slice();Object(c["j"])(a.parallelAxisIndex,(function(t,a){var s=o.getComponent("parallelAxis",t),l=r[a];n.set(l,s),y(s)&&(i.set(l,s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=a))}))}};function y(t){return"category"===t.get("type")}var b=n("ec6f"),x=n("ee1a"),S=n("0f99"),w=n("07fd");function O(t,e,n){n=n||{},Object(b["e"])(t)||(t=Object(b["c"])(t));var i,o=e.get("coordinateSystem"),a=p["a"].get(o),r=g(e);r&&r.coordSysDims&&(i=c["E"](r.coordSysDims,(function(t){var e={name:t},n=r.axisMap.get(t);if(n){var i=n.get("type");e.type=Object(d["a"])(i)}return e}))),i||(i=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]);var s,l,f=n.useEncodeDefaulter,m=Object(h["a"])(t,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:c["u"](f)?f:f?c["h"](S["c"],i,e):null});r&&c["j"](m,(function(t,e){var i=t.coordDim,o=r.categoryAxisMap.get(i);o&&(null==s&&(s=e),t.ordinalMeta=o.getOrdinalMeta(),n.createInvertedIndices&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)})),l||null==s||(m[s].otherDims.itemName=0);var v=Object(x["a"])(e,m),y=new u["a"](m,e);y.setCalculationInfo(v);var w=null!=s&&_(t)?function(t,e,n,i){return i===s?n:this.defaultDimValueGetter(t,e,n,i)}:null;return y.hasItemOption=!1,y.initData(t,null,w),y}function _(t){if(t.sourceFormat===w["f"]){var e=F(t.data||[]);return null!=e&&!c["r"](Object(f["f"])(e))}}function F(t){var e=0;while(e<t.length&&null==t[e])e++;return t[e]}var C=O,I=n("4f85"),D=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.legendSymbol="line",n}return Object(l["b"])(e,t),e.prototype.getInitialData=function(t){return C(this.getSource(),this,{useEncodeDefaulter:!0})},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0},e}(I["a"]),P=D,A=n("2dc5"),N=n("2306"),j=n("a15a"),M=n("861c"),k=n("7d6c"),L=n("3842"),T=n("2b17");function E(t,e){var n=t.mapDimensionsAll("defaultedLabel"),i=n.length;if(1===i){var o=Object(T["e"])(t,e,n[0]);return null!=o?o+"":null}if(i){for(var a=[],r=0;r<n.length;r++)a.push(Object(T["e"])(t,e,n[r]));return a.join(" ")}}function z(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Object(c["r"])(e))return e+"";for(var i=[],o=0;o<n.length;o++){var a=t.getDimensionInfo(n[o]);a&&i.push(e[a.index])}return i.join(" ")}var R=n("7837"),B=n("0da8"),G=function(t){function e(e,n,i,o){var a=t.call(this)||this;return a.updateData(e,n,i,o),a}return Object(l["b"])(e,t),e.prototype._createSymbol=function(t,e,n,i,o){this.removeAll();var a=Object(j["a"])(t,-1,-1,2,2,null,o);a.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),a.drift=V,this._symbolType=t,this.add(a)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(k["l"])(this.childAt(0))},e.prototype.downplay=function(){Object(k["u"])(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},e.prototype.updateData=function(t,n,i,o){this.silent=!1;var a=t.getItemVisual(n,"symbol")||"circle",r=t.hostModel,s=e.getSymbolSize(t,n),l=a!==this._symbolType,c=o&&o.disableAnimation;if(l){var u=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,t,n,s,u)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};c?h.attr(d):N["updateProps"](h,d,r,n)}if(this._updateCommon(t,n,s,i,o),l){h=this.childAt(0);if(!c){d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,N["initProps"](h,d,r,n)}}c&&this.childAt(0).stopAnimation("remove"),this._seriesModel=r},e.prototype._updateCommon=function(t,e,n,i,o){var a,r,s,l,u,h,d,f,p,m=this.childAt(0),g=t.hostModel;if(i&&(a=i.emphasisItemStyle,r=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,u=i.blurScope,h=i.symbolOffset,d=i.labelStatesModels,f=i.hoverScale,p=i.cursorStyle),!i||t.hasItemOption){var v=i&&i.itemModel?i.itemModel:t.getItemModel(e),y=v.getModel("emphasis");a=y.getModel("itemStyle").getItemStyle(),s=v.getModel(["select","itemStyle"]).getItemStyle(),r=v.getModel(["blur","itemStyle"]).getItemStyle(),l=y.get("focus"),u=y.get("blurScope"),h=v.getShallow("symbolOffset"),d=Object(R["d"])(v),f=y.getShallow("scale"),p=v.getShallow("cursor")}var b=t.getItemVisual(e,"symbolRotate");m.attr("rotation",(b||0)*Math.PI/180||0),h&&(m.x=Object(L["l"])(h[0],n[0]),m.y=Object(L["l"])(h[1],n[1])),p&&m.attr("cursor",p);var x=t.getItemVisual(e,"style"),S=x.fill;if(m instanceof B["a"]){var w=m.style;m.useStyle(Object(c["l"])({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},x))}else m.__isEmptyBrush?m.useStyle(Object(c["l"])({},x)):m.useStyle(x),m.style.decal=null,m.setColor(S,o&&o.symbolInnerColor),m.style.strokeNoScale=!0;var O=t.getItemVisual(e,"liftZ"),_=this._z2;null!=O?null==_&&(this._z2=m.z2,m.z2+=O):null!=_&&(m.z2=_,this._z2=null);var F=o&&o.useNameLabel;function C(e){return F?t.getName(e):E(t,e)}Object(R["f"])(m,d,{labelFetcher:g,labelDataIndex:e,defaultText:C,inheritColor:S,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var I=m.ensureState("emphasis");if(I.style=a,m.ensureState("select").style=s,m.ensureState("blur").style=r,f){var D=Math.max(1.1,3/this._sizeY);I.scaleX=this._sizeX*D,I.scaleY=this._sizeY*D}this.setSymbolScale(1),Object(k["j"])(this,l,u)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e){var n=this.childAt(0),i=this._seriesModel,o=Object(M["a"])(this).dataIndex,a=e&&e.animation;if(this.silent=n.silent=!0,e&&e.fadeLabel){var r=n.getTextContent();r&&N["removeElement"](r,{style:{opacity:0}},i,{dataIndex:o,removeOpt:a,cb:function(){n.removeTextContent()}})}else n.removeTextContent();N["removeElement"](n,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:o,cb:t,removeOpt:a})},e.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]},e}(A["a"]);function V(t,e){this.parent.drift(t,e)}var X=G;function Y(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function $(t){return null==t||Object(c["x"])(t)||(t={isIgnore:t}),t||{}}function H(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverScale:n.get("scale"),labelStatesModels:Object(R["d"])(e),cursorStyle:e.get("cursor")}}var U=function(){function t(t){this.group=new A["a"],this._SymbolCtor=t||X}return t.prototype.updateData=function(t,e){e=$(e);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,r=e.disableAnimation,s=H(t),l={disableAnimation:r},c=e.getSymbolPoint||function(e){return t.getItemLayout(e)};o||n.removeAll(),t.diff(o).add((function(i){var o=c(i);if(Y(t,o,i,e)){var r=new a(t,i,s,l);r.setPosition(o),t.setItemGraphicEl(i,r),n.add(r)}})).update((function(u,h){var d=o.getItemGraphicEl(h),f=c(u);if(Y(t,f,u,e)){if(d){d.updateData(t,u,s,l);var p={x:f[0],y:f[1]};r?d.attr(p):N["updateProps"](d,p,i)}else d=new a(t,u),d.setPosition(f);n.add(d),t.setItemGraphicEl(u,d)}else n.remove(d)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}))})).execute(),this._getSymbolPoint=c,this._data=t},t.prototype.isPersistent=function(){return!0},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,n){var i=t._getSymbolPoint(n);e.setPosition(i),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=H(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}n=$(n);for(var o=t.start;o<t.end;o++){var a=e.getItemLayout(o);if(Y(e,a,o,n)){var r=new this._SymbolCtor(e,o,this._seriesScope);r.traverse(i),r.setPosition(a),this.group.add(r),e.setItemGraphicEl(o,r)}}},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()},t}(),q=U;function W(t,e,n){var i=t.getBaseAxis(),o=t.getOtherAxis(i),a=J(o,n),r=i.dim,s=o.dim,l=e.mapDimension(s),u=e.mapDimension(r),h="x"===s||"radius"===s?1:0,d=Object(c["E"])(t.dimensions,(function(t){return e.mapDimension(t)})),f=!1,p=e.getCalculationInfo("stackResultDimension");return Object(x["c"])(e,d[0])&&(f=!0,d[0]=p),Object(x["c"])(e,d[1])&&(f=!0,d[1]=p),{dataDimsForPoint:d,valueStart:a,valueAxisDim:s,baseAxisDim:r,stacked:!!f,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function J(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}function Z(t,e,n,i){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=t.valueStart);var a=t.baseDataOffset,r=[];return r[a]=n.get(t.baseDim,i),r[1-a]=o,e.dataToPoint(r)}var K="undefined"!==typeof Float32Array,Q=K?Float32Array:Array;function tt(t){return Object(c["r"])(t)?K?new Float32Array(t):t:new Q(t)}function et(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}function nt(t,e,n,i,o,a,r,s){for(var l=et(t,e),c=[],u=[],h=[],d=[],f=[],p=[],m=[],g=W(o,e,r),v=W(a,t,s),y=t.getLayout("points")||[],b=e.getLayout("points")||[],x=0;x<l.length;x++){var S=l[x],w=!0,O=void 0,_=void 0;switch(S.cmd){case"=":O=2*S.idx,_=2*S.idx1;var F=y[O],C=y[O+1],I=b[_],D=b[_+1];(isNaN(F)||isNaN(C))&&(F=I,C=D),c.push(F,C),u.push(I,D),h.push(n[O],n[O+1]),d.push(i[_],i[_+1]),m.push(e.getRawIndex(S.idx1));break;case"+":var P=S.idx,A=g.dataDimsForPoint,N=o.dataToPoint([e.get(A[0],P),e.get(A[1],P)]);_=2*P,c.push(N[0],N[1]),u.push(b[_],b[_+1]);var j=Z(g,o,e,P);h.push(j[0],j[1]),d.push(i[_],i[_+1]),m.push(e.getRawIndex(P));break;case"-":var M=S.idx,k=t.getRawIndex(M),L=v.dataDimsForPoint;if(O=2*M,k!==M){var T=a.dataToPoint([t.get(L[0],M),t.get(L[1],M)]),E=Z(v,a,t,M);c.push(y[O],y[O+1]),u.push(T[0],T[1]),h.push(n[O],n[O+1]),d.push(E[0],E[1]),m.push(k)}else w=!1}w&&(f.push(S),p.push(p.length))}p.sort((function(t,e){return m[t]-m[e]}));var z=c.length,R=tt(z),B=tt(z),G=tt(z),V=tt(z),X=[];for(x=0;x<p.length;x++){var Y=p[x],$=2*x,H=2*Y;R[$]=c[H],R[$+1]=c[H+1],B[$]=u[H],B[$+1]=u[H+1],G[$]=h[H],G[$+1]=h[H+1],V[$]=d[H],V[$+1]=d[H+1],X[x]=f[Y]}return{current:R,next:B,stackedOnCurrent:G,stackedOnNext:V,status:X}}var it=n("48a9"),ot=n("76a5"),at=n("cbe5"),rt=n("20c8"),st=n("4a3f"),lt=Math.min,ct=Math.max;function ut(t,e){return isNaN(t)||isNaN(e)}function ht(t,e,n,i,o,a,r,s,l){for(var c,u,h,d,f,p,m=n,g=0;g<i;g++){var v=e[2*m],y=e[2*m+1];if(m>=o||m<0)break;if(ut(v,y)){if(l){m+=a;continue}break}if(m===n)t[a>0?"moveTo":"lineTo"](v,y),h=v,d=y;else{var b=v-c,x=y-u;if(b*b+x*x<.5){m+=a;continue}if(r>0){var S=m+a,w=e[2*S],O=e[2*S+1],_=g+1;if(l)while(ut(w,O)&&_<i)_++,S+=a,w=e[2*S],O=e[2*S+1];var F=.5,C=0,I=0,D=void 0,P=void 0;if(_>=i||ut(w,O))f=v,p=y;else{C=w-c,I=O-u;var A=v-c,N=w-v,j=y-u,M=O-y,k=void 0,L=void 0;"x"===s?(k=Math.abs(A),L=Math.abs(N),f=v-k*r,p=y,D=v+k*r,P=y):"y"===s?(k=Math.abs(j),L=Math.abs(M),f=v,p=y-k*r,D=v,P=y+k*r):(k=Math.sqrt(A*A+j*j),L=Math.sqrt(N*N+M*M),F=L/(L+k),f=v-C*r*(1-F),p=y-I*r*(1-F),D=v+C*r*F,P=y+I*r*F,D=lt(D,ct(w,v)),P=lt(P,ct(O,y)),D=ct(D,lt(w,v)),P=ct(P,lt(O,y)),C=D-v,I=P-y,f=v-C*k/L,p=y-I*k/L,f=lt(f,ct(c,v)),p=lt(p,ct(u,y)),f=ct(f,lt(c,v)),p=ct(p,lt(u,y)),C=v-f,I=y-p,D=v+C*L/k,P=y+I*L/k)}t.bezierCurveTo(h,d,f,p,v,y),h=D,d=P}else t.lineTo(v,y)}c=v,u=y,m+=a}return g}var dt=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),ft=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(l["b"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new dt},e.prototype.buildPath=function(t,e){var n=e.points,i=0,o=n.length/2;if(e.connectNulls){for(;o>0;o--)if(!ut(n[2*o-2],n[2*o-1]))break;for(;i<o;i++)if(!ut(n[2*i],n[2*i+1]))break}while(i<o)i+=ht(t,n,i,o,o,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,i,o=this.path,a=o.data,r=rt["a"].CMD,s="x"===e,l=[],c=0;c<a.length;){var u=a[c++],h=void 0,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0;switch(u){case r.M:n=a[c++],i=a[c++];break;case r.L:if(h=a[c++],d=a[c++],v=s?(t-n)/(h-n):(t-i)/(d-i),v<=1&&v>=0){var y=s?(d-i)*v+i:(h-n)*v+n;return s?[t,y]:[y,t]}n=h,i=d;break;case r.C:h=a[c++],d=a[c++],f=a[c++],p=a[c++],m=a[c++],g=a[c++];var b=s?Object(st["f"])(n,h,f,m,t,l):Object(st["f"])(i,d,p,g,t,l);if(b>0)for(var x=0;x<b;x++){var S=l[x];if(S<=1&&S>=0){y=s?Object(st["a"])(i,d,p,g,S):Object(st["a"])(n,h,f,m,S);return s?[t,y]:[y,t]}}n=m,i=g;break}}},e}(at["b"]),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l["b"])(e,t),e}(dt),mt=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(l["b"])(e,t),e.prototype.getDefaultShape=function(){return new pt},e.prototype.buildPath=function(t,e){var n=e.points,i=e.stackedOnPoints,o=0,a=n.length/2,r=e.smoothMonotone;if(e.connectNulls){for(;a>0;a--)if(!ut(n[2*a-2],n[2*a-1]))break;for(;o<a;o++)if(!ut(n[2*o],n[2*o+1]))break}while(o<a){var s=ht(t,n,o,a,a,1,e.smooth,r,e.connectNulls);ht(t,i,o+s-1,s,a,-1,e.stackedOnSmooth,r,e.connectNulls),o+=s+1,t.closePath()}},e}(at["b"]),gt=n("e887"),vt=n("c7a2"),yt=n("4aa2");function bt(t,e,n,i,o){var a=t.getArea(),r=a.x,s=a.y,l=a.width,c=a.height,u=n.get(["lineStyle","width"])||2;r-=u/2,s-=u/2,l+=u,c+=u,r=Math.floor(r),l=Math.round(l);var h=new vt["a"]({shape:{x:r,y:s,width:l,height:c}});if(e){var d=t.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=c),h.shape.height=0);var m="function"===typeof o?function(t){o(t,h)}:null;N["initProps"](h,{shape:{width:l,height:c,x:r,y:s}},n,null,i,m)}return h}function xt(t,e,n){var i=t.getArea(),o=Object(L["o"])(i.r0,1),a=Object(L["o"])(i.r,1),r=new yt["a"]({shape:{cx:Object(L["o"])(t.cx,1),cy:Object(L["o"])(t.cy,1),r0:o,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(e){var s="angle"===t.getBaseAxis().dim;s?r.shape.endAngle=i.startAngle:r.shape.r=o,N["initProps"](r,{shape:{endAngle:i.endAngle,r:a}},n)}return r}function St(t,e){return t.type===e}var wt=n("eda2");function Ot(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function _t(t){for(var e=1/0,n=1/0,i=-1/0,o=-1/0,a=0;a<t.length;){var r=t[a++],s=t[a++];isNaN(r)||(e=Math.min(r,e),i=Math.max(r,i)),isNaN(s)||(n=Math.min(s,n),o=Math.max(s,o))}return[[e,n],[i,o]]}function Ft(t,e){var n=_t(t),i=n[0],o=n[1],a=_t(e),r=a[0],s=a[1];return Math.max(Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function Ct(t){return"number"===typeof t?t:t?.5:0}function It(t,e,n){if(!n.valueDim)return[];for(var i=e.count(),o=tt(2*i),a=0;a<i;a++){var r=Z(n,t,e,a);o[2*a]=r[0],o[2*a+1]=r[1]}return o}function Dt(t,e,n){for(var i=e.getBaseAxis(),o="x"===i.dim||"radius"===i.dim?0:1,a=[],r=0,s=[],l=[],c=[];r<t.length-2;r+=2)switch(c[0]=t[r+2],c[1]=t[r+3],l[0]=t[r],l[1]=t[r+1],a.push(l[0],l[1]),n){case"end":s[o]=c[o],s[1-o]=l[1-o],a.push(s[0],s[1]);break;case"middle":var u=(l[o]+c[o])/2,h=[];s[o]=h[o]=u,s[1-o]=l[1-o],h[1-o]=c[1-o],a.push(s[0],s[1]),a.push(h[0],h[1]);break;default:s[o]=l[o],s[1-o]=c[1-o],a.push(s[0],s[1])}return a.push(t[r++],t[r++]),a}function Pt(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,o,a=n.length-1;a>=0;a--){var r=n[a].dimension,s=t.dimensions[r],l=t.getDimensionInfo(s);if(i=l&&l.coordDim,"x"===i||"y"===i){o=n[a];break}}if(o){var u=e.getAxis(i),h=c["E"](o.stops,(function(t){return{offset:0,coord:u.toGlobalCoord(u.dataToCoord(t.value)),color:t.color}})),d=h.length,f=o.outerColors.slice();d&&h[0].coord>h[d-1].coord&&(h.reverse(),f.reverse());var p=10,m=h[0].coord-p,g=h[d-1].coord+p,v=g-m;if(v<.001)return"transparent";c["j"](h,(function(t){t.offset=(t.coord-m)/v})),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new it["a"](0,0,0,0,h,!0);return y[i]=m,y[i+"2"]=g,y}}}function At(t,e,n){var i=t.get("showAllSymbol"),o="auto"===i;if(!i||o){var a=n.getAxesByScale("ordinal")[0];if(a&&(!o||!Nt(a,e))){var r=e.mapDimension(a.dim),s={};return c["j"](a.getViewLabels(),(function(t){var e=a.scale.getRawOrdinalNumber(t.tickValue);s[e]=1})),function(t){return!s.hasOwnProperty(e.get(r,t))}}}}function Nt(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var o=e.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*X.getSymbolSize(e,r)[t.isHorizontal()?1:0]>i)return!1;return!0}function jt(t,e){return isNaN(t)||isNaN(e)}function Mt(t){for(var e=t.length/2;e>0;e--)if(!jt(t[2*e-2],t[2*e-1]))break;return e-1}function kt(t,e){return[t[2*e],t[2*e+1]]}function Lt(t,e,n){for(var i,o,a=t.length/2,r="x"===n?0:1,s=0,l=-1,c=0;c<a;c++)if(o=t[2*c+r],!isNaN(o)&&!isNaN(t[2*c+1-r]))if(0!==c){if(i<=e&&o>=e||i>=e&&o<=e){l=c;break}s=c,i=o}else i=o;return{range:[s,l],t:(e-i)/(o-i)}}function Tt(t,e,n,i){if(St(e,"cartesian2d")){var o=i.getModel("endLabel"),a=o.get("show"),r=o.get("valueAnimation"),s=i.getData(),l={lastFrameIndex:0},c=a?function(n,i){t._endLabelOnDuring(n,i,s,l,r,o,e)}:null,u=e.getBaseAxis().isHorizontal(),h=bt(e,n,i,(function(){var e=t._endLabel;e&&n&&null!=l.originalX&&e.attr({x:l.originalX,y:l.originalY})}),c);if(!i.get("clip",!0)){var d=h.shape,f=Math.max(d.width,d.height);u?(d.y-=f,d.height+=2*f):(d.x-=f,d.width+=2*f)}return c&&c(1,h),h}return xt(e,n,i)}function Et(t,e){var n=e.getBaseAxis(),i=n.isHorizontal(),o=n.inverse,a=i?o?"right":"left":"center",r=i?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||r}}}var zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l["b"])(e,t),e.prototype.init=function(){var t=new A["a"],e=new q;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var i=this,o=t.coordinateSystem,a=this.group,r=t.getData(),s=t.getModel("lineStyle"),l=t.getModel("areaStyle"),u=r.getLayout("points")||[],h="polar"===o.type,d=this._coordSys,f=this._symbolDraw,p=this._polyline,m=this._polygon,g=this._lineGroup,v=t.get("animation"),y=!l.isEmpty(),b=l.get("origin"),x=W(o,r,b),S=y&&It(o,r,x),w=t.get("showSymbol"),O=w&&!h&&At(t,r,o),_=this._data;_&&_.eachItemGraphicEl((function(t,e){t.__temp&&(a.remove(t),_.setItemGraphicEl(e,null))})),w||f.remove(),a.add(g);var F,C=!h&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(F=o.getArea(),null!=F.width?(F.x-=.1,F.y-=.1,F.width+=.2,F.height+=.2):F.r0&&(F.r0-=.5,F.r+=.5)),this._clipShapeForSymbol=F;var I=Pt(r,o)||r.getVisual("style")[r.getVisual("drawType")];p&&d.type===o.type&&C===this._step?(y&&!m?m=this._newPolygon(u,S):m&&!y&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,Object(wt["b"])(I)),g.setClipPath(Tt(this,o,!1,t)),w&&f.updateData(r,{isIgnore:O,clipShape:F,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),Ot(this._stackedOnPoints,S)&&Ot(this._points,u)||(v?this._doUpdateAnimation(r,S,o,n,C,b):(C&&(u=Dt(u,o,C),S&&(S=Dt(S,o,C))),p.setShape({points:u}),m&&m.setShape({points:u,stackedOnPoints:S})))):(w&&f.updateData(r,{isIgnore:O,clipShape:F,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),v&&this._initSymbolLabelAnimation(r,o,F),C&&(u=Dt(u,o,C),S&&(S=Dt(S,o,C))),p=this._newPolyline(u),y&&(m=this._newPolygon(u,S)),h||this._initOrUpdateEndLabel(t,o,Object(wt["b"])(I)),g.setClipPath(Tt(this,o,!0,t)));var D=t.get(["emphasis","focus"]),P=t.get(["emphasis","blurScope"]);if(p.useStyle(c["i"](s.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"})),Object(k["z"])(p,t,"lineStyle"),p.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])){var A=p.getState("emphasis").style;A.lineWidth=p.style.lineWidth+1}Object(M["a"])(p).seriesIndex=t.seriesIndex,Object(k["j"])(p,D,P);var N=Ct(t.get("smooth")),j=t.get("smoothMonotone"),L=t.get("connectNulls");if(p.setShape({smooth:N,smoothMonotone:j,connectNulls:L}),m){var T=r.getCalculationInfo("stackedOnSeries"),E=0;m.useStyle(c["i"](l.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel",decal:r.getVisual("style").decal})),T&&(E=Ct(T.get("smooth"))),m.setShape({smooth:N,stackedOnSmooth:E,smoothMonotone:j,connectNulls:L}),Object(k["z"])(m,t,"areaStyle"),Object(M["a"])(m).seriesIndex=t.seriesIndex,Object(k["j"])(m,D,P)}var z=function(t){i._changePolyState(t)};r.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=z)})),this._polyline.onHoverStateChange=z,this._data=r,this._coordSys=o,this._stackedOnPoints=S,this._points=u,this._step=C,this._valueOrigin=b},e.prototype.dispose=function(){},e.prototype.highlight=function(t,e,n,i){var o=t.getData(),a=f["p"](o,i);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var r=o.getLayout("points"),s=o.getItemGraphicEl(a);if(!s){var l=r[2*a],c=r[2*a+1];if(isNaN(l)||isNaN(c))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,c))return;s=new X(o,a),s.x=l,s.y=c,s.setZ(t.get("zlevel"),t.get("z")),s.__temp=!0,o.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else gt["a"].prototype.highlight.call(this,t,e,n,i)},e.prototype.downplay=function(t,e,n,i){var o=t.getData(),a=f["p"](o,i);if(this._changePolyState("normal"),null!=a&&a>=0){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else gt["a"].prototype.downplay.call(this,t,e,n,i)},e.prototype._changePolyState=function(t){var e=this._polygon;Object(k["y"])(this._polyline,t),e&&Object(k["y"])(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new ft({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new mt({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,e,n){var i,o,a=e.getBaseAxis(),r=a.inverse;"cartesian2d"===e.type?(i=a.isHorizontal(),o=!1):"polar"===e.type&&(i="angle"===a.dim,o=!0);var s=t.hostModel,l=s.get("animationDuration");"function"===typeof l&&(l=l(null));var c=s.get("animationDelay")||0,u="function"===typeof c?c(null):c;t.eachItemGraphicEl((function(t,a){var s=t;if(s){var h=[t.x,t.y],d=void 0,f=void 0,p=void 0;if(o){var m=n,g=e.pointToCoord(h);i?(d=m.startAngle,f=m.endAngle,p=-g[1]/180*Math.PI):(d=m.r0,f=m.r,p=g[0])}else{var v=n;i?(d=v.x,f=v.x+v.width,p=t.x):(d=v.y+v.height,f=v.y,p=t.y)}var y=f===d?0:(p-d)/(f-d);r&&(y=1-y);var b="function"===typeof c?c(a):l*y+u,x=s.getSymbolPath(),S=x.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,delay:b}),S&&S.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var i=t.getModel("endLabel");if(i.get("show")){var o=t.getData(),a=this._polyline,r=this._endLabel;r||(r=this._endLabel=new ot["a"]({z2:200}),r.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var s=Mt(o.getLayout("points"));s>=0&&(Object(R["f"])(a,Object(R["d"])(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:s,defaultText:function(t,e,n){return null!=n?z(o,n):E(o,t)},enableTextSetter:!0},Et(i,e)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,n,i,o,a,r){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var c=n.getLayout("points"),u=n.hostModel,h=u.get("connectNulls"),d=a.get("precision"),p=a.get("distance")||0,m=r.getBaseAxis(),g=m.isHorizontal(),v=m.inverse,y=e.shape,b=v?g?y.x:y.y+y.height:g?y.x+y.width:y.y,x=(g?p:0)*(v?-1:1),S=(g?0:-p)*(v?-1:1),w=g?"x":"y",O=Lt(c,b,w),_=O.range,F=_[1]-_[0],C=void 0;if(F>=1){if(F>1&&!h){var I=kt(c,_[0]);s.attr({x:I[0]+x,y:I[1]+S}),o&&(C=u.getRawValue(_[0]))}else{I=l.getPointOn(b,w);I&&s.attr({x:I[0]+x,y:I[1]+S});var D=u.getRawValue(_[0]),P=u.getRawValue(_[1]);o&&(C=f["h"](n,d,D,P,O.t))}i.lastFrameIndex=_[0]}else{var A=1===t||i.lastFrameIndex>0?_[0]:0;I=kt(c,A);o&&(C=u.getRawValue(A)),s.attr({x:I[0]+x,y:I[1]+S})}o&&Object(R["e"])(s).setLabelText(C)}},e.prototype._doUpdateAnimation=function(t,e,n,i,o,a){var r=this._polyline,s=this._polygon,l=t.hostModel,c=nt(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),u=c.current,h=c.stackedOnCurrent,d=c.next,f=c.stackedOnNext;if(o&&(u=Dt(c.current,n,o),h=Dt(c.stackedOnCurrent,n,o),d=Dt(c.next,n,o),f=Dt(c.stackedOnNext,n,o)),Ft(u,d)>3e3||s&&Ft(h,f)>3e3)return r.setShape({points:d}),void(s&&s.setShape({points:d,stackedOnPoints:f}));r.shape.__points=c.current,r.shape.points=u;var p={shape:{points:d}};c.current!==u&&(p.shape.__points=c.next),r.stopAnimation(),N["updateProps"](r,p,l),s&&(s.setShape({points:u,stackedOnPoints:h}),s.stopAnimation(),N["updateProps"](s,{shape:{stackedOnPoints:f}},l),r.shape.points!==s.shape.points&&(s.shape.points=r.shape.points));for(var m=[],g=c.status,v=0;v<g.length;v++){var y=g[v].cmd;if("="===y){var b=t.getItemGraphicEl(g[v].idx1);b&&m.push({el:b,ptIdx:v})}}r.animators&&r.animators.length&&r.animators[0].during((function(){s&&s.dirtyShape();for(var t=r.shape.__points,e=0;e<m.length;e++){var n=m[e].el,i=2*m[e].ptIdx;n.x=t[i],n.y=t[i+1],n.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(gt["a"]),Rt=zt,Bt=n("cccd");function Gt(t,e){return{seriesType:t,plan:Object(Bt["a"])(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,o=t.pipelineContext,a=e||o.large;if(i){var r=Object(c["E"])(i.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=r.length,l=n.getCalculationInfo("stackResultDimension");Object(x["c"])(n,r[0])&&(r[0]=l),Object(x["c"])(n,r[1])&&(r[1]=l);var u=n.getDimensionInfo(r[0]),h=n.getDimensionInfo(r[1]),d=u&&u.index,f=h&&h.index;return s&&{progress:function(t,e){for(var n=t.end-t.start,o=a&&tt(n*s),r=[],l=[],c=t.start,u=0;c<t.end;c++){var h=void 0;if(1===s){var p=e.getByDimIdx(d,c);h=i.dataToPoint(p,null,l)}else r[0]=e.getByDimIdx(d,c),r[1]=e.getByDimIdx(f,c),h=i.dataToPoint(r,null,l);a?(o[u++]=h[0],o[u++]=h[1]):e.setItemLayout(c,h.slice())}a&&e.setLayout("points",o)}}}}}}var Vt={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Xt=function(t){return Math.round(t.length/2)};function Yt(t){return{seriesType:t,reset:function(t,e,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,r=i.count();if(r>10&&"cartesian2d"===a.type&&o){var s=a.getBaseAxis(),l=a.getOtherAxis(s),c=s.getExtent(),u=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(u||1),d=Math.round(r/h);if(d>1){"lttb"===o&&t.setData(i.lttbDownSample(i.mapDimension(l.dim),1/d));var f=void 0;"string"===typeof o?f=Vt[o]:"function"===typeof o&&(f=o),f&&t.setData(i.downSample(i.mapDimension(l.dim),1/d,f,Xt))}}}}}function $t(t){t.registerChartView(Rt),t.registerSeriesModel(P),t.registerLayout(Gt("line",!0)),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Yt("line"))}var Ht=n("ff32"),Ut=n("9394"),qt=n("2da7"),Wt=n("4b2a"),Jt=n("f95e"),Zt={components:{TextTitle:a["m"],BorderBox1:a["a"]},data:function(){return{legendList:["当前人数","流入","流出"],lineChart:null,ticklineColor:"#5C7E99",colors:["#9E78ED","#008CFF","#4DFFF3"]}},mounted:function(){r["a"]([Ht["a"],Ut["a"],qt["a"],Wt["a"],$t,Jt["a"]]),this.initChart()},methods:{initChart:function(){var t=this.ticklineColor,e=this.legendList,n=this.colors;this.lineChart=s["b"](document.getElementById("line-chart"));var i={color:n,tooltip:{trigger:"axis"},legend:{data:this.legendList,right:-5,top:-3,icon:"rect",textStyle:{color:"#A3BACC"},itemWidth:8,itemHeight:8},grid:{top:66,left:38,right:38,bottom:28,containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"],axisTick:{inside:!0},axisLine:{lineStyle:{color:t}}},yAxis:{type:"value",axisLine:{show:!0,lineStyle:{color:t}},splitLine:{show:!1},axisTick:{show:!0,inside:!0}},series:[{name:e[0],type:"line",smooth:!0,symbol:"none",data:[120,132,101,134,90,230,210]},{name:e[1],type:"line",smooth:!0,symbol:"none",data:[220,182,191,234,290,330,310]},{name:e[2],type:"line",smooth:!0,symbol:"none",data:[150,232,201,154,190,330,410]}]};this.lineChart.setOption(i)}}},Kt=Zt,Qt=(n("42d4"),n("2877")),te=Object(Qt["a"])(Kt,i,o,!1,null,null,null);e["default"]=te.exports},2682:function(t,e,n){t.exports=n.p+"img/park.f0ce53fa.png"},"2daf":function(t,e,n){t.exports=n.p+"img/building-foundation.27ee2bcc.png"},3749:function(t,e,n){"use strict";var i=n("9a0f"),o=n.n(i);o.a},"39b0":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"floor-detail"},[i("div",{staticClass:"floor-overlay-list"},t._l(t.floors,(function(e,n){return i("FloorOverlayItem",{key:n,attrs:{index:n,isShowStatus:t.curFloor-1===n,isShowLine:t.curFloor-1===n}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"line-and-light"},[i("canvas",{staticClass:"connect-line-canvas",attrs:{width:t.w,height:t.h}}),i("img",{staticClass:"floor-light",attrs:{src:n("e60b"),alt:"楼层灯光"}}),i("div",{staticClass:"cur-floor-num-tips"},[t._v(" "+t._s(t.curFloor+"层")+" "),t.list.length?i("div",{staticClass:"status-color status-line-animation",style:{background:t.statusColors[t.list[t.curFloor-1].status]}}):t._e()])])])},o=[],a=(n("4160"),n("a9e3"),n("d3b7"),n("159b"),n("d0ff")),r=(n("96cf"),n("c964")),s=n("2af9"),l=n("4260"),c={components:{FloorOverlayItem:s["c"]},props:{status:{type:Number,default:1},curFloor:{type:Number,default:1},floors:{type:Number,default:25},list:{type:Array,default:function(){return[]}},delay:{type:Number,default:250},lineDuration:{type:Number,default:350},statusColors:{type:Array,deault:function(){return[]}}},data:function(){return{w:200,h:300,ctx:null,isShow:!1,curFloorNum:1,lastFloorNum:"",direction:"toPrev"}},mounted:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{init:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["d"])(t);case 2:return e.isShow=!0,e.initLine(),n.next=6,e.animateLine();case 6:return e.floorNumTips(.8*e.lineDuration),n.next=9,Object(l["d"])(600);case 9:e.setCurFloor(e.direction,e.curFloorNum-1);case 10:case"end":return n.stop()}}),n)})))()},initLine:function(){var t=this.$el.querySelector(".connect-line-canvas");this.ctx=t.getContext("2d"),this.handleDraw(this.curFloor,this.floors)},animateLine:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=t.$el.querySelector(".line-and-light");n.classList.remove("width-627"),n.classList.add("width-0"),setTimeout((function(){n.classList.add("width-627"),e()}),t.lineDuration)})));case 1:case"end":return e.stop()}}),e)})))()},handleDraw:function(t,e){var n=1-t/e,i=this.h*n+2;this.drawLine([0,i])},drawLine:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[200,138],n=this.ctx;n.clearRect(0,0,200,300),n.lineWidth=2,n.beginPath(),n.moveTo.apply(n,Object(a["a"])(t)),n.lineTo.apply(n,Object(a["a"])(e)),n.strokeStyle="#fff",n.stroke()},floorNumTips:function(t){var e=this.$el.querySelector(".cur-floor-num-tips");e.classList.remove("scale-1"),e.classList.add("scale-0"),setTimeout((function(){e.classList.add("scale-1")}),t)},toNext:function(){this.direction="toNext",this.curFloorNum--,this.curFloorNum<1&&(this.curFloorNum=1,console.log("到底了")),this.setCurFloor(this.direction,this.curFloorNum-1)},toPrev:function(){this.direction="toPrev",this.curFloorNum++,this.curFloorNum>this.floors&&(this.curFloorNum=this.floors,console.log("到顶了")),this.setCurFloor(this.direction,this.curFloorNum-1)},setCurFloor:function(t,e){var n=this.$el.querySelectorAll(".floor-overlay-item");if(this.clearFloorItemClassList(),"toPrev"===t)if(n[e].classList.add("floor-overlay-item-def-top"),0===e)n[e].classList.add("to-prev-1");else{var i=e-1;n[i].classList.add("pos-prev-1","to-prev-3"),n[e].classList.add("to-prev-2")}else if(console.log("setCurFloor direction",t),0===e){var o=e+1;n[o].classList.add("pos-prev-1","to-next-1"),n[e].classList.add("pos-next-1","to-next-2")}else{var a=e+1,r=e-1;n[a].classList.add("pos-prev-1","to-next-1"),n[e].classList.add("pos-next-1","to-next-2"),n[r].classList.add("pos-next-2","to-next-4")}console.log("当前楼层",e+1),this.lastFloorNum=e},clearFloorItemClassList:function(){var t=this.$el.querySelectorAll(".floor-overlay-item");t.forEach((function(t){t.classList=["floor-overlay-item"]}))},changeFloorNum:function(t){if(!(t===this.curFloorNum||t<1)){var e=t-this.curFloorNum;this.direction=e>0?"toPrev":"toNext",this.curFloorNum=t,this.setCurFloor(this.direction,t-1)}}},watch:{curFloor:function(t){var e=this;console.log("watch curFloor",t),this.$nextTick(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.handleDraw(t,e.floors),e.animateLine(),e.floorNumTips(.8*e.lineDuration),n.next=5,Object(l["d"])(600);case 5:e.changeFloorNum(t);case 6:case"end":return n.stop()}}),n)}))))}}},u=c,h=(n("1e83"),n("2877")),d=Object(h["a"])(u,i,o,!1,null,null,null);e["default"]=d.exports},"42bc":function(t,e,n){t.exports=n.p+"img/snap-shot-02.6fd903fd.png"},"42d4":function(t,e,n){"use strict";var i=n("8f6f"),o=n.n(i);o.a},"4f61":function(t,e,n){},"8f6f":function(t,e,n){},9190:function(t,e,n){},"9a0f":function(t,e,n){},a228:function(t,e,n){t.exports=n.p+"img/snap-shot-01.2f438fc3.png"},c515:function(t,e,n){"use strict";var i=n("cfaf"),o=n.n(i);o.a},c5a4:function(t,e,n){"use strict";var i=n("ebd3"),o=n.n(i);o.a},cfaf:function(t,e,n){},e2d7:function(t,e,n){t.exports=n.p+"img/snap-shot-04.60768361.png"},ebd3:function(t,e,n){},edb0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"floor-statistics bsizing"},[n("TextTitle",{attrs:{title:"当前楼层统计"}}),n("BorderBox1",{staticClass:"flex-c",attrs:{w:589,h:126}},[n("RetainedPeople",{attrs:{des:"实时留存人数",num:234}}),n("FlowNumItem",{attrs:{type:"inflow",num:4,des:"实时流入人数"}}),n("FlowNumItem",{attrs:{type:"outflow",num:2,des:"实时流出人数"}}),n("FlowNumItem",{attrs:{type:"people-flow",num:2,des:"净流入"}})],1)],1)},o=[],a=n("2af9"),r={components:{TextTitle:a["m"],BorderBox1:a["a"],FlowNumItem:a["d"],RetainedPeople:a["k"]},data:function(){return{}},mounted:function(){},methods:{}},s=r,l=(n("c5a4"),n("2877")),c=Object(l["a"])(s,i,o,!1,null,null,null);e["default"]=c.exports},f25b:function(t,e,n){t.exports=n.p+"img/snap-shot-03.cb0202cd.png"},f456:function(t,e,n){var i={"./snap-shot-01.png":"a228","./snap-shot-02.png":"42bc","./snap-shot-03.png":"f25b","./snap-shot-04.png":"e2d7"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id="f456"},f5b8:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("PageBg",[i("div",{staticClass:"page",style:{transform:"scale("+t.scale+") translate(-50%, -50%)"}},[i("PageHeader",{attrs:{title:t.title,isFullScreen:t.isFullScreen,switchFullScreen:t.handleSwitchFullSceen}}),i("div",{staticClass:"page-content bsizing"},[i("div",{staticClass:"layout-l"},[i("DeviceStatus",{ref:"deviceStatus",attrs:{chartData:t.pieChartData,offline:t.offline,online:t.online}}),i("AlarmPoint"),i("RealTimeAlarm")],1),i("div",{staticClass:"layout-r bsizing"},[i("div",{staticClass:"park"},[i("img",{staticClass:"bg",attrs:{src:n("2682"),alt:"bg"}}),i("GradientBar",{attrs:{pageScale:t.scale}}),i("FloorBuilding",{ref:"floorBuilding",attrs:{list:t.floorList,floors:t.floors,curFloor:t.curFloor,delay:t.buildingAnimateDelay}}),i("FloorDetail",{ref:"floorDetail",attrs:{status:2,floors:t.floors,curFloor:t.curFloor,list:t.floorList,delay:t.buildingAnimateDelay,lineDuration:t.lineDuration,statusColors:t.statusColors}})],1),i("div",{staticClass:"view-data bsizing"},[i("AlarmStatistics"),i("AllMonitor",{attrs:{totalFloors:t.floors,list:t.floorList,curFloorChange:t.curFloorChange}})],1),i("FloorStatistics")],1)])],1)])},o=[],a=(n("96cf"),n("c964")),r=n("2af9"),s=n("9afd"),l=n("1a6a"),c=n("1861"),u=n("22e3"),h=n("110d"),d=n("edb0"),f=n("194c"),p=n("39b0"),m=n("4260"),g={components:{PageHeader:r["h"],DeviceStatus:s["default"],AlarmPoint:l["default"],RealTimeAlarm:c["default"],AlarmStatistics:u["default"],PageBg:r["g"],AllMonitor:h["default"],FloorStatistics:d["default"],GradientBar:r["e"],FloorBuilding:f["default"],FloorDetail:p["default"]},data:function(){return{scale:1,title:"山东产业技术研究院楼宇人员热力分布",isFullScreen:!1,statusColors:["#CFDCE6","#E6312E","#E6722E","#B5CF34","#7EE639","#45E66F","#2EDAE6"],floorList:[],floors:0,curFloor:1,delay:4e3,buildingAnimateDelay:100,lineDuration:350,interTimer:null,direction:"toPrev",pieChartData:[],online:"",offline:""}},created:function(){this.handleResize()},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=m["c"].bind(t)(t.handleResize,200),Object(m["a"])(window,"resize",n),i=Object(m["f"])(),Object(m["a"])(window,i+"fullscreenchange",t.fullscreenchange.bind(t)),e.next=6,t.checkFloorList(25);case 6:o=t.floors*t.buildingAnimateDelay,t.$nextTick((function(){Object(m["d"])(o).then((function(){t.$refs.floorDetail.init(),t.intervalChangeCurFloor()}))})),t.checkDeviceStatus();case 9:case"end":return e.stop()}}),e)})))()},methods:{checkFloorList:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,o,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(m["d"])(0);case 2:for(i=[],o=e.statusColors.length,a=0;a<t;a++)r={status:a%o+1,id:a+1,num:a+1+"人",isOnline:a%2,name:a+1+"层",pic:a%4+1},i.push(r);e.floorList=i,e.floors=i.length;case 7:case"end":return n.stop()}}),n)})))()},checkDeviceStatus:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["d"])(2e3);case 2:n=[{name:"在线",value:27},{name:"离线",value:25}],t.pieChartData=n,t.offline=n[1].value,t.online=n[0].value,t.$refs.deviceStatus.initChart(n);case 7:case"end":return e.stop()}}),e)})))()},fullscreenchange:function(){console.log("full screen change");var t=document.webkitIsFullScreen||document.mozFullScreen||document.fullScreen;this.isFullScreen=!!t},handleResize:function(){console.log("handleResize");var t=0,e=1920,n=1080,i=16/9,o=document.documentElement,a=o.clientWidth,r=o.clientHeight,s=a/r;t=s>i?r/n:a/e,this.scale=t},handleSwitchFullSceen:function(){console.log("handleSwitchFullSceen"),this.isFullScreen=!this.isFullScreen,this.isFullScreen?Object(m["e"])():Object(m["b"])()},intervalChangeCurFloor:function(){var t=this,e=this.delay;this.interTimer=setInterval((function(){t.curFloor>=t.floors&&(t.direction="toNext"),t.curFloor<=1&&(t.direction="toPrev"),"toPrev"===t.direction?t.curFloor++:t.curFloor--}),e)},clearInterChangeFloor:function(){var t=this.interTimer;t&&clearInterval(t),t=null},curFloorChange:function(t){this.clearInterChangeFloor(),this.curFloor=t,this.intervalChangeCurFloor()}},beforeDestroy:function(){Object(m["i"])(window,"resize",this.handleResize);var t=Object(m["f"])();Object(m["i"])(window,t+"fullscreenchange",this.fullscreenchange),this.clearInterChangeFloor()}},v=g,y=(n("04d3"),n("2877")),b=Object(y["a"])(v,i,o,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-214c9eee.2738e563.js.map